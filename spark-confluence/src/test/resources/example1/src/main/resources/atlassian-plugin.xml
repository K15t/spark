<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}" />
    </plugin-info>

    <!-- === Admin App ========================= -->

    <servlet name="Admin App Servlet" key="admin-app-servlet" class="com.k15t.spark.confluence.ConfluenceAppServlet">
        <description>Outputs the 'Hello World' SPARK admin app.</description>
        <url-pattern>/admin-app*</url-pattern>
        <init-param>
            <!-- This is the path in your resource directory where the angularjs application lives -->
            <param-name>resource-path</param-name>
            <param-value>/admin_app</param-value>
        </init-param>
    </servlet>



    <!-- === Space App ========================= -->

    <servlet name="Space App Servlet" key="space-app-servlet" class="com.k15t.spark.confluence.ConfluenceAppServlet">
        <description>Outputs the 'Hello World' SPARK space app.</description>
        <url-pattern>/space-app*</url-pattern>
        <init-param>
            <!-- This is the path in your resource directory where the angularjs application lives -->
            <param-name>resource-path</param-name>
            <param-value>/space_app</param-value>
        </init-param>
    </servlet>

    <xwork key="space-app-actions">
        <package name="Space App Action" extends="default" namespace="/spaces/space-app">
            <default-interceptor-ref name="defaultStack"/>
            <action name="index" class="com.k15t.spark.confluence.ConfluenceSpaceAppAction" method="index">
                <result name="input" type="velocity">/com/k15t/spark/confluence/space-app.vm</result>
                <result name="notpermitted" type="redirect">/pages/pagenotpermitted.action</result>
                <param name="resource-path">/space_app</param>
            </action>
        </package>
    </xwork>



    <!-- === Dialog App ========================= -->

    <web-resource name="Dialog App Bootstrap" key="dialog-app-web-resource">
        <description>Hooks in the Viewport Controller (in the Confluence UI).</description>

        <context>page</context>
        <context>blogpost</context>

        <resource type="download" name="lazyload.js" location="/spark/lazyload.js"/>
        <resource type="download" name="spark-dialog-app-bootstrap.js" location="/spark/spark-dialog-app-bootstrap.js"/>
        <resource type="download" name="spark-dialog-app-bootstrap.soy.js" location="/spark/spark-dialog-app-bootstrap.soy"/>
        <!--<resource type="download" name="confluence-viewport-control.soy.js" location="/com/k15t/scroll/viewport/confluence/web/control/confluence-viewport-control.soy"/>-->
        <!--<resource type="download" name="confluence-viewport-control.js"     location="/com/k15t/scroll/viewport/confluence/web/control/confluence-viewport-control.js"/>-->
        <!--<resource type="download" name="confluence-viewport-control.css"    location="/com/k15t/scroll/viewport/confluence/web/control/confluence-viewport-control.css"/>-->

        <!--<transformation extension="js">-->
            <!--<transformer key="jsI18n" />-->
        <!--</transformation>-->
        <transformation extension="soy">
            <transformer key="soyTransformer">
                <functions>com.atlassian.confluence.plugins.soy:soy-core-functions</functions>
            </transformer>
        </transformation>
    </web-resource>

    <servlet name="Dialog App 1 Servlet" key="dialog-app1-servlet" class="com.k15t.spark.confluence.ConfluenceAppServlet">
        <description>Outputs the 'Hello World' SPARK dialog app.</description>
        <url-pattern>/dialog-app1*</url-pattern>
        <init-param>
            <!-- This is the path in your resource directory where the angularjs application lives -->
            <param-name>resource-path</param-name>
            <param-value>/dialog_app</param-value>
        </init-param>
    </servlet>

    <servlet name="Dialog App 2 Servlet" key="dialog-app2-servlet" class="com.k15t.spark.confluence.ConfluenceAppServlet">
        <description>Outputs the 'Hello World' SPARK dialog app 2.</description>
        <url-pattern>/dialog-app2*</url-pattern>
        <init-param>
            <!-- This is the path in your resource directory where the angularjs application lives -->
            <param-name>resource-path</param-name>
            <param-value>/dialog_app_v14</param-value>
        </init-param>
    </servlet>






</atlassian-plugin>
